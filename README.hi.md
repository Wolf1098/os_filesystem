# os_filesystem-एक वर्चुअल फाइल सिस्टम (C++)

## परिचय

यह एक लिनक्स जैसा वर्चुअल फाइल सिस्टम है। सिस्टम एक वर्चुअल डिस्क फाइल द्वारा चलाया जाता है, जो फाइल पढ़ने और लिखने के द्वारा डिस्क को पढ़ने और लिखने का अनुकरण करता है, और इसमें अंतर्निहित ड्राइवर शामिल नहीं होते हैं।

एक साधारण लिनक्स जैसी फाइल सिस्टम लिखने के लिए, आपको सबसे पहले एक बुनियादी ढांचा तैयार करना होगा जिसमें इनोड, ब्लॉक, सुपरब्लॉक, वर्चुअल डिस्क लेआउट, स्पेस आवंटन और अन्य जानकारी शामिल है। फ़ाइल सिस्टम की शुरुआत एक सुपरब्लॉक है, जिसमें सिस्टम के बारे में महत्वपूर्ण जानकारी होती है, जिसमें इनोड और ब्लॉक की संख्या और आकार शामिल है। इनोड के लिए, आम तौर पर, इसे डिस्क स्थान के एक प्रतिशत पर कब्जा करने की आवश्यकता होती है, लेकिन यह एक छोटी प्रणाली है जिसका कुल आकार केवल 5M से थोड़ा अधिक है, इसलिए इनोड क्षेत्र को आवंटित स्थान बहुत छोटा है, और अधिकांश शेष स्थान ब्लॉक क्षेत्र है।

फाइल सिस्टम की समग्र योजना इस प्रकार है:  
![](./screenshots/00.png)

क्योंकि प्रोग्राम लिखते समय समय की कमी होती है, कोड को जांचने और स्वीकार करने में केवल 4 दिन लगते हैं, इसलिए कोड को ऑप्टिमाइज़ करने का समय नहीं था, और कुछ हिस्से बेमानी दिखाई देंगे। आश्चर्यचकित न हों।

हालांकि समय सीमित है, एक vi संपादक का एक अतिरिक्त कार्य लागू किया गया है। लेखन अपेक्षाकृत सरल है और कोड गड़बड़ है। इसे सुधारने का समय है।

सामान्य तौर पर, कोड को अभी तक अनुकूलित नहीं किया गया है, और अधिक टिप्पणियों का स्वागत है, और अधिक दोष चुने गए हैं।

## कैसे इस्तेमाल करे

### चरण 1: प्रोजेक्ट डाउनलोड करें

`git clone https://github.com/windcode/os_filesystem.git`

### चरण 2: प्रोजेक्ट को VC++6.0 . के साथ खोलें

कैटलॉग में डबल-क्लिक करें**MingOS.dsw**फ़ाइल करें, या फ़ाइल को VC++6.0 इंटरफ़ेस पर खींचें।

### step 3：编译，链接，运行

![](./screenshots/0.png)

### या

### चरण 1: सीधे चलाएं**/डीबग**फ़ोल्डर के तहत**MingOS.exe**डाक्यूमेंट

## विशेषता

-   पहले चलाएँ, वर्चुअल डिस्क फ़ाइल बनाएँ

![](./screenshots/1.png)

-   लॉग इन सिस्टम

डिफ़ॉल्ट उपयोगकर्ता रूट है और पासवर्ड रूट है

![](./screenshots/2.gif)

-   सहायता आदेश (सहायता)

![](./screenshots/3.gif)

-   उपयोगकर्ता जोड़ें, हटाएं, लॉगिन करें, लॉगआउट करें (useradd, userdel, logout)

![](./screenshots/5.gif)

-   फ़ाइल या निर्देशिका अनुमतियाँ संशोधित करें (chmod)

![](./screenshots/6.gif)

-   लिखना और पढ़ना अनुमतियों द्वारा प्रतिबंधित है

![](./screenshots/7.gif)

-   फ़ाइल/फ़ोल्डर जोड़ना और हटाना (स्पर्श, rm, mkdir, rmdir)

![](./screenshots/8.gif)

-   सिस्टम की जानकारी देखें (सुपर, इनोड, ब्लॉक)

![](./screenshots/9.gif)

-   vi पाठ संपादक का अनुकरण करें (vi)

![](./screenshots/4.gif)

-   सूचकांक नोड इनोड प्रबंधन फ़ाइल और निर्देशिका जानकारी

-   उपयोग**समूह लिंक विधि**निःशुल्क ब्लॉकों के आवंटन का प्रबंधन करें
        * **block分配过程：**
    जब किसी ब्लॉक को आवंटित करने की आवश्यकता होती है, तो मुक्त ब्लॉक स्टैक का शीर्ष नए आवंटित ब्लॉक के रूप में एक मुक्त ब्लॉक पता निकालता है।
    जब स्टैक खाली होता है, तो स्टैक के निचले पते द्वारा दर्शाए गए फ्री ब्लॉक में स्टैक का उपयोग नए फ्री ब्लॉक स्टैक के रूप में किया जाता है।
        * **block回收过程：**
    किसी ब्लॉक को पुनः प्राप्त करते समय, जांचें कि क्या स्टैक भरा हुआ है। यदि यह पूर्ण नहीं है, तो वर्तमान स्टैक पॉइंटर को ऊपर ले जाया जाता है और पुनः प्राप्त किए जाने वाले ब्लॉक का पता नए स्टैक के शीर्ष पर रखा जाता है।
    यदि स्टैक भरा हुआ है, तो पुनर्नवीनीकरण किए जाने वाले ब्लॉक को एक नए फ्री ब्लॉक स्टैक के रूप में उपयोग किया जाता है, और फ्री ब्लॉक स्टैक के निचले तत्व का पता अभी फ्री ब्लॉक स्टैक पर सेट किया जाता है।
        * 分配和回收的同时需要更新block位图，以及超级块。

-   इनोड आवंटन/पुनर्ग्रहण
    -   अनुक्रमिक आवंटन और पुनर्प्राप्ति का उपयोग करते हुए, इनोड का आवंटन और पुनर्प्राप्ति अपेक्षाकृत सरल है।
    -   जब इसे आवंटित करने की आवश्यकता होती है, तो इनोड बिटमैप से क्रमिक रूप से एक मुफ्त इनोड की खोज करें, और खोज सफल होने पर इनोड की संख्या वापस कर दें।
    -   रीसाइक्लिंग करते समय, बस इनोड बिटमैप को अपडेट करें।
    -   आवंटन और पुनर्प्राप्ति दोनों को इनोड बिटमैप को अद्यतन करने की आवश्यकता है।

## सूचना

-   ऑपरेटिंग वातावरण वीसी++ 6.0 . है
